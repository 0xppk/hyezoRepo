import { a } from './chunk-U6DJLCJW.mjs';
import { Combobox, Transition } from '@headlessui/react';
import { HiChevronUpDown, HiCheck } from 'react-icons/hi2';
import y from 'fuse.js';
import { useState, useMemo, Fragment } from 'react';
import { useFormContext, Controller } from 'react-hook-form';
import { jsx, jsxs, Fragment as Fragment$1 } from 'react/jsx-runtime';

function I({list:l,name:f,labelKey:o,imageKey:m,removeDuplicates:h}){let{control:x}=useFormContext(),[i,u]=useState(""),c=h?useMemo(()=>a(l,o),[l]):l,b=new y(c,{includeScore:!0,keys:[String(o)]}),p=i===""?c:b.search(i).map(a=>({...a.item}));return jsx(Controller,{name:f,control:x,render:({field:a})=>jsx(Combobox,{defaultValue:a.value,onChange:a.onChange,refName:a.name,children:jsxs("div",{className:"relative flex-1",children:[jsxs("div",{className:"relative flex min-w-full items-center",children:[jsx(Combobox.Input,{className:"text-smoke-500 h-10 min-w-full rounded-full bg-white/20 py-2 pl-10 pr-10 caret-orange-500 saturate-150 backdrop-blur-md placeholder:text-white/40 focus:outline-none",placeholder:"Search...",spellCheck:"false",displayValue:t=>String(t[o]),onChange:t=>u(t.target.value)}),jsx(Combobox.Button,{className:"absolute inset-y-0 right-0 flex items-center pr-2 text-black/70",children:jsx(HiChevronUpDown,{className:"h-5 w-5","aria-hidden":"true"})})]}),jsx(Transition,{as:Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",afterLeave:()=>u(""),children:jsx(Combobox.Options,{className:"absolute z-10 mt-1 max-h-80 w-full overflow-auto rounded-xl bg-white/20 shadow-xl ring-1 ring-black ring-opacity-5 drop-shadow-xl saturate-150 backdrop-blur-md focus:outline-none sm:text-sm",children:p.length===0&&i!==""?jsx("div",{className:"relative cursor-default select-none px-4 py-2 text-white/70",children:"Nothing found"}):p.map((t,v)=>jsx(Combobox.Option,{className:({active:n})=>`relative cursor-default select-none py-2 pl-10 pr-4 ${n?"bg-white/10 text-white/90":"text-white/70"}`,value:t,children:({selected:n,active:P})=>jsxs(Fragment$1,{children:[jsxs("div",{className:"flex items-center gap-3",children:[m&&jsx("img",{className:"h-10 w-10 rounded-full",src:String(t[m])}),jsx("span",{className:`block truncate ${n?"font-extrabold text-white":"font-normal"}`,children:String(t[o])})]}),n?jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-white/90",children:jsx(HiCheck,{className:"h-5 w-5","aria-hidden":"true"})}):null]})},`${String(t[o])}+ ${v}`))})})]})})})}

export { I as a };
