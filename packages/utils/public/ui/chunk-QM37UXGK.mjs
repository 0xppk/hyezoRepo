import { useState, useCallback, useRef, useEffect, useLayoutEffect } from 'react';
import { debounce } from 'lodash';
import { zodResolver } from '@hookform/resolvers/zod';
import { useForm } from 'react-hook-form';

var K=typeof window<"u"?useLayoutEffect:useEffect,M=K;function z(e,t,o,n){let r=useRef(t);M(()=>{r.current=t;},[t]),useEffect(()=>{let u=o?.current??window;if(!(u&&u.addEventListener))return;let s=i=>r.current(i);return u.addEventListener(e,s,n),()=>{u.removeEventListener(e,s,n);}},[e,o,n]);}var c=z;function l(e){useEffect(e,[]);}function b(e,t=300){let[o,n]=useState(""),r=useCallback(debounce(f=>n(f),t),[t]),u=f=>r(f.target.value),s=useCallback(()=>{n(""),!(typeof e>"u")&&e(o);},[e,o]);return [o,u,s,()=>n("")]}function L({schema:e,...t}){return useForm({...t,resolver:zodResolver(e)})}function y(e){let[t,o]=useState({});return l(()=>{if(e?.current==null)return;let n=new ResizeObserver(([r])=>o(r.contentRect));return n.observe(e.current),()=>n.disconnect()}),t}function g(e={},t=[]){let o=useRef(null),[n,r]=useState(!1),[u,s]=useState(),i={threshold:e.threshold||0,root:e.root||null,rootMargin:e.rootMargin||"0%",freezeAfterVisible:e.freezeAfterVisible||!1},{freezeAfterVisible:f,root:p,rootMargin:m,threshold:v}=i,E=n&&f,I=a=>{let[d]=a;s(d),r(d.isIntersecting);};return useEffect(()=>{let a=o?.current;if(!!!globalThis.IntersectionObserver||E||!a)return;let S={threshold:v,root:p,rootMargin:m},x=new IntersectionObserver(I,S);return x.observe(a),()=>x.disconnect()},[o,v,p,m,E,...t]),[o,n,u]}function N(e,t){return P(e,t,globalThis.localStorage)}function P(e,t,o){let[n,r]=useState(()=>{if(typeof window>"u")return t;try{let s=o.getItem(e);return s?JSON.parse(s):t instanceof Function?t():t}catch(s){return console.error(s),t}});return useEffect(()=>{typeof window<"u"&&n!==void 0&&o.setItem(e,JSON.stringify(n));},[e,n,o]),[n,r,()=>{o.removeItem(e),r(t);}]}function J(e,t,o="mousedown"){c(o,n=>{let r=e?.current;!r||r.contains(n.target)||t(n);});}var U=J;

export { c as a, U as b, b as c, L as d, y as e, g as f, N as g };
